(function(){var t,n,i,e=[].slice;n=function(){function t(t){this.entity=t,this.entity.addHandler=this.addHandler.bind(this),this.handlers={}}return t.prototype.handlers=null,t.prototype.entity=null,t.prototype.arrayFromString=function(t){return Array.isArray(t)?t:t.split(",").map(function(t){return t.trim()})},t.prototype.warn=function(t){return console.warn("Backbone-initialize warn: "+t)},t.prototype.getChild=function(t,n,i){var e;return null==i&&(i=this.entity),e=t.shift(),null!=i[e]?t.length?this.getChild(t,n,i[e]):i[e]:(this.warn(e+" undefined (this."+n+")"),null)},t.prototype.addHandler=function(t,n,i){var e,r,o,a,l,s,h;if(null==i&&(i=this.entity),"object"==typeof t){a=[];for(r in t)h=t[r],a.push(this.addHandler(r,h,i));return a}if("object"!=typeof n||Array.isArray(n)){if("string"==typeof n?n=this.arrayFromString(n):Array.isArray(n)||(n=[n]),"_"===t[0]&&(t=n.shift()),o=t.split("."),t=o.pop(),o.length&&!(i=this.getChild(o,o.join("."),i)))return;return n.forEach(function(n){return function(r){var o,a;if(o=!1,a=n.entity,"string"==typeof r){if(o=r,e=r.split("."),r=e.pop(),!(a=e.length?n.getChild(e,o):n.entity))return;r=a[r]}return"function"==typeof r?n.entity.listenTo(i,t,r.bind(a)):n.warn("Can't find handler for \""+t+'"'+(o?': "'+o+'"':""))}}(this))}if(e=this.getChild(t.split("."),t,i)){l=[];for(r in n)s=n[r],l.push(this.addHandler(r,s,e));return l}return this.warn("Can't append handlers to "+t+" cause child not found")},t.prototype.addHandlers=function(){if(null!=this.entity.handlers&&!this.entity.disableHandlers)return this.addHandler(this.entity.handlers)},t.prototype.ready=function(){var t,n;return t=1<=arguments.length?e.call(arguments,0):[],this.addHandlers(),(n=this.entity).trigger.apply(n,["ready"].concat(e.call(t)))},t}(),this.BackboneBootstrap=t=[],i=function(){var i,r,o,a,l,s,h;if(l=1<=arguments.length?e.call(arguments,0):[],a=this.options,this instanceof Backbone.Collection&&(a=l[1]),"object"==typeof this.handlers||null!=(null!=a?a.attach:void 0)||"function"==typeof this.ready){if(this._bbInitialize=new n(this),"function"==typeof this.ready&&this.addHandler("ready",this.ready),null!=(null!=a?a.attach:void 0)){s=a.attach;for(r in s)o=s[r],this[r]=o}return t.length||Array.isArray(this.bootstrap)?(this.bootstrap||(this.bootstrap=[]),this.bootstrap=t.concat(this.bootstrap),i=this.bootstrap.map(function(t){return function(n){var i;return i="function"==typeof n?n:t[n],"function"!=typeof i&&(t._bbInitialize.warn("Bootstrap item "+n+" isn't function"),i=$.noop),i.apply(t,l)}}(this)),$.when.apply(null,i).then(function(t){return function(){var n;return(n=t._bbInitialize).ready.apply(n,l)}}(this))):(h=this._bbInitialize).ready.apply(h,l)}},Backbone.Model.prototype.initialize=i,Backbone.Collection.prototype.initialize=i,Backbone.View.prototype.initialize=i,null!=Backbone.Layout&&(Backbone.Layout.prototype.initialize=i),"undefined"!=typeof Marionette&&null!==Marionette&&(Marionette.Object.prototype.initialize=i)}).call(this);